import{app as e,sentry as t,express_ as r}from"./app.js";import{APIrouter as s}from"../routes/path.routes.js";import o from"cookie-parser";import n from"dotenv";import i from"cors";n.config(),t.init({dsn:"https://3bafbe230776d91f7f506aeda5a881ce@o4507149535936512.ingest.us.sentry.io/4507149776453632",integrations:[new t.Integrations.Http({tracing:!0}),new t.Integrations.Express({app:e}),],tracesSampleRate:1}),e.use(t.Handlers.requestHandler()),e.use(t.Handlers.tracingHandler()),console.log("sentry activo"),console.log(process.env.SECRET_TOKEN);let corsOpt={origin:!0,methods:"GET,HEAD,PUT,PATCH,POST,DELETE",preflightContinue:!1,optionsSuccessStatus:204};e.use(o()),e.use(r.json()),e.use("/api",i(corsOpt),s),e.use(t.Handlers.errorHandler()),e.use(function e(t,r,s,o){s.statusCode=500,s.end(s.sentry+"\n")});let port=process.env.PORT||3e3;e.listen(port,(...e)=>{console.log(e)});